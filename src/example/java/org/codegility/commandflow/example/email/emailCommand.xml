<?xml version="1.0" encoding="UTF-8"?>
<commands xmlns="http://org.codegility.commandflow/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://org.codegility.commandflow/1 ../../../../../../../main/java/org/codegility/commandflow/bind/xml/v1/commandflow.xsd">

  <command name="gmailConfigurer" class="org.codegility.commandflow.example.email.commands.MailConfigurerCommand" />
  <command name="yahooConfigurer" class="org.codegility.commandflow.example.email.commands.MailConfigurerCommand" />
  <command name="hotmailConfigurer" class="org.codegility.commandflow.example.email.commands.MailConfigurerCommand" />

  <!-- Configure email provider based on provided 'from' address -->
  <or name="configureMail">
    <command ref="gmailConfigurer" />
    <command ref="yahooConfigurer" />
    <command ref="hotmailConfigurer" />
  </or>

  <if name="inputMessage" value="#{c.recipients.size() == 0}">
    <command class="org.codegility.commandflow.example.email.commands.InputTextBodyCommand" />
  </if>

  <!-- Sends an email, queries user for input on stdin if context is missing data -->
  <sequence name="sendEmail">
    <command class="org.codegility.commandflow.example.email.commands.InputFromAddressCommand" />
    <if ref="configureMail">
      <command class="org.codegility.commandflow.example.email.commands.InputToAddressCommand" />
      <command class="org.codegility.commandflow.example.email.commands.InputSubjectCommand" />
      <command ref="inputMessage" />
      <command class="org.codegility.commandflow.example.email.commands.SendMailCommand" />
    </if>
  </sequence>
</commands>